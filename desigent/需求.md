# 需求方案

我将项目重新划分为三个主要阶段：**基础框架搭建**、**核心功能开发**、**高级体验优化与发布**。每个阶段都包含了一系列明确的、可操作的子任务。

## **第一阶段：基础框架搭建与核心页面骨架**

这个阶段是项目的基石，我们必须确保技术选型和开发环境是稳定和高效的。

### **任务 1.1：项目初始化与依赖配置**

- **技术栈：** `Vite`, `Vue 3`, `TypeScript`, `Pinia`, `Vue Router`
- **任务内容：**
  1. 使用 `Vite` 初始化一个 Vue 3 + TypeScript 项目。
  2. 集成并配置 `Pinia` 用于状态管理，`Vue Router` 用于路由管理。
  3. 安装并配置 `Element Plus`。
- **验收标准：**
  - `npm install` 和 `npm run dev` 能够成功执行。
  - 项目目录结构清晰，`package.json` 中的核心依赖配置正确。

### **任务 1.2：代码规范化与自动化**

- **技术栈：** `ESLint`, `Prettier`, `Stylelint`, `@vue/eslint-config-standard`, `@element-plus/eslint-config`
- **任务内容：**
  1. 安装并配置 `ESLint`, `Prettier` 和 `Stylelint`。
  2. 集成 `Standardjs` 规范，并添加 Vue 和 Element Plus 相关的 lint 规则。
- **验收标准：**
  - 项目根目录 `.eslintrc.cjs`、`.prettierrc`、`.stylelintrc.cjs` 文件配置正确。
  - 代码提交时触发自动检查，不符合规范的代码被阻止提交。

### **任务 1.3：基础响应式布局与路由实现**

- **技术栈：** `Vue Router`, `Element Plus`, `CSS Flexbox/Grid`
- **任务内容：**
  1. 设计并实现一个通用的页面布局组件（`Layout`），包含导航栏和页脚的占位符。
  2. 定义并实现首页（`/`）、文章列表页（`/articles`）和文章详情页（`/articles/:id`）的路由。
  3. 使用 `CSS Flexbox` 或 `Grid` 实现基础的响应式布局，确保在不同屏幕尺寸下内容不会溢出或错位。
- **验收标准：**
  - 在浏览器中访问 `/`、`/articles` 和 `/articles/1` 能看到不同的页面骨架。
  - 调整浏览器窗口大小时，页面布局能自适应，无横向滚动条。

### **任务 1.4：Mock 数据与 Pinia Store**

- **技术栈：** `Pinia`
- **任务内容：**
  1. 创建本地 Mock 数据文件，模拟文章列表数据（包含标题、摘要、日期、作者等）。
  2. 在 `Pinia` 中定义 `article` 模块，并编写 `getArticles` action，从 Mock 数据中获取文章列表。
  3. 在文章列表页中，通过 `Pinia Store` 展示 Mock 数据。
- **验收标准：**
  - 页面能正常展示 Mock 文章列表数据，数据来源于 Pinia Store。

---

## **第二阶段：核心功能与高级交互开发**

此阶段将重点放在实现项目的核心功能和提升用户体验上，每个任务都专注于一个独立的业务功能。

### **任务 2.1：暗黑模式与主题切换**

- **技术栈：** `Element Plus`, `CSS Variables`
- **任务内容：**
  1. 基于 `Element Plus` 的主题定制功能，实现暗黑模式切换。
  2. 使用 CSS Variables 定义一套自定义主题色。
  3. 将用户选择的主题色和模式（亮/暗）持久化到本地存储（如 `localStorage`）中，确保刷新后状态不变。
- **验收标准：**
  - 点击切换按钮，页面主题色和模式能即时切换。
  - 刷新浏览器后，主题保持用户上次的选择。

### **任务 2.2：文章内容展示与目录导航**

- **技术栈：** `markdown-it`, `highlight.js`
- **任务内容：**
  1. 集成 `markdown-it` 库，实现文章详情内容的 Markdown 渲染。
  2. 开发一个目录组件，动态解析渲染后的 HTML 内容，提取 H2、H3 等标题，生成目录树。
  3. 实现点击目录项平滑滚动到对应标题位置，以及页面滚动时，目录项自动高亮。
- **验收标准：**
  - 文章内容能正确渲染 Markdown 语法，包括代码块高亮。
  - 目录导航正确生成，交互效果符合预期。

### **任务 2.3：PWA 与离线缓存**

- **技术栈：** `vite-plugin-pwa`, `Service Worker API`, `IndexDB`
- **任务内容：**
  1. 安装并配置 `vite-plugin-pwa`，生成 `manifest.json` 和 `Service Worker` 文件。
  2. 编写 `Service Worker` 逻辑，实现静态资源（如 CSS, JS, 图片）的离线缓存。
  3. 利用 `IndexDB` 缓存部分文章数据，实现离线状态下仍可阅读已访问过的文章。
- **验收标准：**
  - 浏览器地址栏出现安装 PWA 的提示。
  - 断开网络后，网站能正常打开并展示已缓存的内容。

### **任务 2.4：侧边栏与页脚组件**

- **技术栈：** `Vue Components`
- **任务内容：**
  1. 独立开发 `Sidebar` 组件，包含个人信息、站点公告等模块。
  2. 独立开发 `Footer` 组件，包含版权信息、站点地图、社交媒体链接和友情链接。
  3. 将这两个组件嵌入到 `Layout` 组件中。
- **验收标准：**
  - 侧边栏和页脚内容清晰展示，且在不同页面保持一致。

---

## **第三阶段：高级体验优化与发布准备**

此阶段将重点放在性能调优和最终发布前的收尾工作，确保项目的高质量交付。

### **任务 3.1：用户自定义布局**

- **技术栈：** `VueDraggable` 或类似库
- **任务内容：**
  1. 调研并集成一个适合 Vue 3 的拖拽库（如 `VueDraggable`）。
  2. 在首页实现拖拽功能，允许用户自定义侧边栏和文章列表的布局。
  3. 将用户自定义的布局结构保存到 `localStorage`。
- **验收标准：**
  - 用户可以通过拖拽改变页面模块的位置。
  - 刷新页面后，模块布局保持不变。

### **任务 3.2：性能优化与发布**

- **技术栈：** `Web Worker API`, `Vite`
- **任务内容：**
  1. 将计算密集型任务（如大型文章的 Markdown 渲染）迁移到 `Web Worker` 中执行，避免阻塞主线程。
  2. 利用 `Vite` 的特性，进行代码分割（Code Splitting）、图片懒加载等性能优化。
  3. 编写项目 README.md 文档，包含项目介绍、安装、运行、打包等详细说明。
- **验收标准：**
  - 使用 `Lighthouse` 或 `Chrome DevTools` 检查，性能指标（如 First Contentful Paint, TTI）有显著提升。
  - 项目文档完整，可供其他开发者快速上手。
